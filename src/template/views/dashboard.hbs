<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../public/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/css/styles.css">
    <title>Dashboard</title>
    <style>

        .table-section {
            margin-bottom: 2rem;
        }

        h2 {
            color: rgb(255, 255, 255);
        }

        .scrollable-container {
            overflow-y: auto;
            background-color: #212529;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .placeholder-item {
            margin-bottom: 15px;
            padding: 15px;
            background-color: #343a40;
            border-radius: 8px;
            color: #fff;
        }

        .prfimg {
            width: 150px;
            height: 150px;
            object-fit: cover;
            max-width: 100%;
            margin: 0 auto;
            display: block;
            border-radius: 50%;
        }

        .fixed-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 30px;
        }

        .posts-container {
            background-color: #212529;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            max-width: 1200px;
            margin: 0 auto;
        }

        .posts-wrapper {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .post-container {
            background-color: #343a40;
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .post-container h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .post-container .post-image {
            max-width: 100%;
            margin-bottom: 10px;
            border-radius: 8px;
        }

        .post-container h4 {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .post-timestamp {
            font-size: 0.8rem;
            color: #b0b0b0;
            margin-bottom: 15px;
        }

        .post-icons {
            display: flex;
            gap: 15px;
            font-size: 1.2rem;
            color: #ffffff;
        }

        .post-icons i:hover {
            color: #ffc107;
            cursor: pointer;
        }


        h2 {
            margin: 10px 0;
            color: #ffffff;
        }

        h4 {
            margin: 10px 0;
            color: #ffffff;
        }

        .addpost {
            max-width: 40px;
        }

        .comments-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #343a40;
            border-radius: 8px;
        }

        .comments-list {
            margin-bottom: 15px;
        }

        .comment {
            background-color: #495057;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            color: #fff;
        }

        .comment-form {
            margin-top: 15px;
        }
    </style>
</head>
<script src="../public/js/bootstrap.bundle.js"></script>

<body>

    {{>mainheader}}

    <div class="container mt-5">
        <a href="/post">
            <button type="button" title="Post Image" class="btn btn-outline-primary fixed-btn"><img
                    src="../public/images/AddPost.png" class="img-fluid addpost" alt="Add Post"></button>
        </a>

    </div> <!-- Header -->
    <h2 class="text-center mb-4">My Profile</h2>

    <!-- User Details Table -->
    <div class="table-section text-center">
        <div class="table-responsive mx-auto" style="max-width: 600px;">
            <table class="table table-striped table-bordered table-dark">
                <tbody>
                    <tr>
                        <td colspan="2">
                            <img src="../../{{pri}}" class="prfimg" alt="Profile Image" title="Profile Image"
                                class="img-fluid rounded-circle">
                        </td>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <td>{{name}}</td>
                    </tr>
                    <tr>
                        <th>Roll No</th>
                        <td>{{rollno}}</td>
                    </tr>
                    <tr>
                        <th>Batch</th>
                        <td>{{batch}}</td>
                    </tr>
                    <tr>
                        <th>Branch</th>
                        <td>{{branch}}</td>
                    </tr>
                    <tr>
                        <th>Skills</th>
                        <td>{{skill}}</td>
                    </tr>
                    {{#if (eq mobno.access "public")}}
                    <tr>
                        <th>Mob No</th>
                        <td>{{mobno.mobno}}</td>
                    </tr>
                    {{/if}}
                    <tr>
                        <th>Mail ID</th>
                        <td>{{mailid}}</td>
                    </tr>
                    <tr>
                        <th>Address</th>
                        <td>{{address}}</td>
                    </tr>
                    <tr>
                        <th>Service Type</th>
                        <td>{{servicetype}}</td>
                    </tr>
                    <tr>
                        <th>Company</th>
                        <td>{{company}}</td>
                    </tr>
                    <tr>
                        <th>Posts</th>
                        <td>{{noposts}}</td>
                    </tr>
                    <tr>
                        <th>Unique ID (Use For BackEnd Support)</th>
                        <td>{{ui}}<button style="margin:5px" type="button" onclick="copyui('{{ui}}')"
                                class="btn btn-outline-primary">Copy</button></td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>

    <!-- Buttons -->
    <div class="container mt-5">
        <div class="table-responsive">
            <table class="table table-bordered table-striped table-dark text-center">
                <thead class="thead-dark">
                    <tr>
                        <th><a href="/actions"><button type="button" class="btn btn-primary">Actions</button></a></th>
                        <th><a href="/registercomplaint"><button type="button"
                                    class="btn btn-primary">Complaint</button></a></th>
                        <th><a href="/viewcomplaints"><button type="button" class="btn btn-primary">See
                                    Complaints</button></a></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>

    <div class="container mt-5">

    </div>


    </div>

    <div class="container mt-5">
        <div class="posts-wrapper" style="margin: 10px">
            {{#each posts}}
            <div class="post-container">

                <h2>{{this.head}}</h2>
                <h6>Author : {{this.rollno}}</h6>

                <!-- Post Image -->
                {{#if this.postimage}}
                <img src="{{this.postimage}}" alt="Post Image" class="post-image img-fluid d-block mx-auto" title={{this.head}}>
                {{/if}}

                <!-- Post Description -->
                {{#if this.text}}
                <h4>{{this.text}}</h4>
                {{/if}}

                <!-- Post Timestamp -->
                <p class="post-timestamp">{{this.dateandtime.dateStr}}
                    {{this.dateandtime.hours}}:{{this.dateandtime.mins}} {{this.dateandtime.a}}</p>

                <!-- Comments Section -->
                <div class="comments-section">
                    <h5 style="color: yellow;">Comments:</h5>
                    <div class="comments-list">
                        {{#each this.comments}}
                        <div class="comment">
                            <p><strong>{{this.author}}:</strong> {{this.text}}</p>
                        </div>
                        {{/each}}
                    </div>

                    <!-- Add a New Comment -->
                    <form class="comment-form" action="/post/{{this.id}}/addcomment" method="POST">
                        <div class="mb-3">
                            <label for="commentText" class="form-label">Add your comment</label>
                            <textarea class="form-control" id="commentText" name="commentText" rows="3"
                                required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit Comment</button>
                        <div id="messages">
                            {{#if success}}
                            <div class="alert alert-success">{{success}}</div>
                            {{/if}}
                            {{#if warn}}
                            <div class="alert alert-warning">{{warn}}</div>
                            {{/if}}
                        </div>
                    </form>
                </div>
            </div>
            {{/each}}
        </div>
    </div>



    <!-- Bootstrap 5 JS file -->
    {{>footer}}

</body>
<script>
    function copyui(ui) {
        navigator.clipboard.writeText(ui)
            .then(() => {
                console.log("Copied to clipboard:", ui);
                alert("Copied to clipboard!");
            })
            .catch((err) => {
                console.error("Failed to copy:", err);
                alert("Failed to copy to clipboard.");
            });
    }
</script>

</html>